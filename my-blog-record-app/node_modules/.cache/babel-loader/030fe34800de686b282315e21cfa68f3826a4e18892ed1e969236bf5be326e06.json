{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\my-blog-record-app\\\\src\\\\components\\\\KakaoMap.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst KakaoMap = ({\n  records = []\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const markersRef = useRef([]);\n  const geocoderRef = useRef(null);\n  const [ready, setReady] = useState(false); // ✅ 초기화 완료 여부\n\n  useEffect(() => {\n    const initMap = () => {\n      const container = document.getElementById('map');\n      if (!container) return;\n      const map = new window.kakao.maps.Map(container, {\n        center: new window.kakao.maps.LatLng(36.5, 127.5),\n        level: 12\n      });\n      mapRef.current = map;\n      geocoderRef.current = new window.kakao.maps.services.Geocoder();\n      setReady(true); // ✅ 지도 + 지오코더 초기화 완료\n    };\n    if (!window.kakao || !window.kakao.maps) {\n      const script = document.createElement('script');\n      script.src = '//dapi.kakao.com/v2/maps/sdk.js?appkey=eb46d70dcce4c3347f6e67a7afcfa896&autoload=false&libraries=services';\n      script.async = true;\n      script.onload = () => window.kakao.maps.load(initMap);\n      document.head.appendChild(script);\n    } else {\n      window.kakao.maps.load(initMap);\n    }\n  }, []);\n  useEffect(() => {\n    if (!ready || !mapRef.current || !geocoderRef.current) return;\n    const map = mapRef.current;\n    const geocoder = geocoderRef.current;\n    const bounds = new window.kakao.maps.LatLngBounds();\n\n    // ✅ 중복 주소 제거\n    const uniqueRecords = Array.from(new Map(records.map(r => [r.address, r])).values());\n\n    // 이전 마커 제거\n    markersRef.current.forEach(marker => marker.setMap(null));\n    markersRef.current = [];\n    const geocodePromises = uniqueRecords.map(record => {\n      return new Promise(resolve => {\n        var _record$address;\n        const address = (_record$address = record.address) === null || _record$address === void 0 ? void 0 : _record$address.trim();\n        if (!address) return resolve(null);\n        geocoder.addressSearch(address, (result, status) => {\n          if (status === window.kakao.maps.services.Status.OK) {\n            const coords = new window.kakao.maps.LatLng(result[0].y, result[0].x);\n            const marker = new window.kakao.maps.Marker({\n              map,\n              position: coords\n            });\n            markersRef.current.push(marker);\n            bounds.extend(coords);\n            resolve(coords);\n          } else {\n            console.warn(\"❌ 주소 검색 실패:\", address);\n            resolve(null);\n          }\n        });\n      });\n    });\n    Promise.all(geocodePromises).then(results => {\n      const valid = results.filter(r => r !== null);\n      console.log(\"✅ 마커 찍힌 개수:\", valid.length);\n      if (valid.length > 0) {\n        map.setBounds(bounds);\n      }\n    });\n  }, [records, ready]); // ✅ ready 의존성 추가\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    style: {\n      width: '100%',\n      height: '500px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 10\n  }, this);\n};\n_s(KakaoMap, \"ABNjFliQnU3aGpIY5pN9zx+Mo2E=\");\n_c = KakaoMap;\nexport default KakaoMap;\nvar _c;\n$RefreshReg$(_c, \"KakaoMap\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","KakaoMap","records","_s","mapRef","markersRef","geocoderRef","ready","setReady","initMap","container","document","getElementById","map","window","kakao","maps","Map","center","LatLng","level","current","services","Geocoder","script","createElement","src","async","onload","load","head","appendChild","geocoder","bounds","LatLngBounds","uniqueRecords","Array","from","r","address","values","forEach","marker","setMap","geocodePromises","record","Promise","resolve","_record$address","trim","addressSearch","result","status","Status","OK","coords","y","x","Marker","position","push","extend","console","warn","all","then","results","valid","filter","log","length","setBounds","id","style","width","height","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/my-blog-record-app/src/components/KakaoMap.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\nconst KakaoMap = ({ records = [] }) => {\r\n  const mapRef = useRef(null);\r\n  const markersRef = useRef([]);\r\n  const geocoderRef = useRef(null);\r\n  const [ready, setReady] = useState(false); // ✅ 초기화 완료 여부\r\n\r\n  useEffect(() => {\r\n    const initMap = () => {\r\n      const container = document.getElementById('map');\r\n      if (!container) return;\r\n\r\n      const map = new window.kakao.maps.Map(container, {\r\n        center: new window.kakao.maps.LatLng(36.5, 127.5),\r\n        level: 12,\r\n      });\r\n\r\n      mapRef.current = map;\r\n      geocoderRef.current = new window.kakao.maps.services.Geocoder();\r\n      setReady(true); // ✅ 지도 + 지오코더 초기화 완료\r\n    };\r\n\r\n    if (!window.kakao || !window.kakao.maps) {\r\n      const script = document.createElement('script');\r\n      script.src =\r\n        '//dapi.kakao.com/v2/maps/sdk.js?appkey=eb46d70dcce4c3347f6e67a7afcfa896&autoload=false&libraries=services';\r\n      script.async = true;\r\n      script.onload = () => window.kakao.maps.load(initMap);\r\n      document.head.appendChild(script);\r\n    } else {\r\n      window.kakao.maps.load(initMap);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!ready || !mapRef.current || !geocoderRef.current) return;\r\n\r\n    const map = mapRef.current;\r\n    const geocoder = geocoderRef.current;\r\n    const bounds = new window.kakao.maps.LatLngBounds();\r\n\r\n    // ✅ 중복 주소 제거\r\n    const uniqueRecords = Array.from(\r\n      new Map(records.map((r) => [r.address, r])).values()\r\n    );\r\n\r\n    // 이전 마커 제거\r\n    markersRef.current.forEach((marker) => marker.setMap(null));\r\n    markersRef.current = [];\r\n\r\n    const geocodePromises = uniqueRecords.map((record) => {\r\n      return new Promise((resolve) => {\r\n        const address = record.address?.trim();\r\n        if (!address) return resolve(null);\r\n\r\n        geocoder.addressSearch(address, (result, status) => {\r\n          if (status === window.kakao.maps.services.Status.OK) {\r\n            const coords = new window.kakao.maps.LatLng(result[0].y, result[0].x);\r\n            const marker = new window.kakao.maps.Marker({\r\n              map,\r\n              position: coords,\r\n            });\r\n\r\n            markersRef.current.push(marker);\r\n            bounds.extend(coords);\r\n            resolve(coords);\r\n          } else {\r\n            console.warn(\"❌ 주소 검색 실패:\", address);\r\n            resolve(null);\r\n          }\r\n        });\r\n      });\r\n    });\r\n\r\n    Promise.all(geocodePromises).then((results) => {\r\n      const valid = results.filter((r) => r !== null);\r\n      console.log(\"✅ 마커 찍힌 개수:\", valid.length);\r\n\r\n      if (valid.length > 0) {\r\n        map.setBounds(bounds);\r\n      }\r\n    });\r\n  }, [records, ready]); // ✅ ready 의존성 추가\r\n\r\n  return <div id=\"map\" style={{ width: '100%', height: '500px' }} />;\r\n};\r\n\r\nexport default KakaoMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}